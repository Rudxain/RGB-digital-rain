"use strict";let RAF=requestAnimationFrame,canv=document.getElementById("c"),ctx=canv.getContext("2d",{alpha:!1,desynchronized:!0}),colors=["f00","ff0","0f0","0ff","00f","f0f"],charset="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",colTracer=[],Hz_to_ms=e=>1e3/e,randRange=(e,t)=>Math.random()*(t-e)+ +e,clamp=(e,t,o)=>e>o?o:e<t?t:e;let w,h,t,playing,itID,tmID,resizeDelay=1500,zoom=32,speed=30,dimDepth=1,minCol=6,maxCol=14,color_i=0;let resize=()=>{w=canv.width=document.body.offsetWidth,h=canv.height=document.body.offsetHeight;let e=Math.ceil(w/zoom);for(;e>colTracer.length;)colTracer.push(0);colTracer.length=e},drawChars=()=>{ctx.fillStyle="#"+colors[color_i++],ctx.font=`bold ${zoom}px monospace`,color_i%=colors.length;for(let e=0,t=0;e<colTracer.length;e++,t+=zoom){let o=colTracer[e];ctx.fillText(charset[0|randRange(0,charset.length)],t,o),colTracer[e]=o>randRange(1<<minCol,1<<maxCol)>>>0?0:o+zoom}},doGlobalDimming=e=>{if(!playing)return;let o=e-t,a=Math.round((r=0,(l=o*dimDepth)>(n=255)?n:l<r?r:l));var l,r,n;a&&(ctx.fillStyle="#000000"+a.toString(16).padStart(2,0),ctx.fillRect(0,0,w,h),t=e),RAF(doGlobalDimming)},togglePlay=()=>{(playing=!playing)?(itID=setInterval(drawChars,1e3/speed),RAF(doGlobalDimming)):clearInterval(itID)};resize(),RAF((e=>{drawChars(),t=e})),(playing=!playing)?(itID=setInterval(drawChars,1e3/speed),RAF(doGlobalDimming)):clearInterval(itID),addEventListener("resize",(()=>{clearTimeout(tmID),tmID=setTimeout(resize,resizeDelay)}));
